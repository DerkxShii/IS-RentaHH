---
export interface Props {
  title?: string;
}

const { title } = Astro.props;
---

<div class="gps-bg">
  <div class="gps-bg__guts">
    <div class="gps-bg__bg"></div>
  </div>
  <div
    class="gps-bg__fade [background-image:linear-gradient(to_bottom,#ffff_10%,rgba(255,255,255,0)_100%)] dark:[background-image:linear-gradient(to_bottom,#000_10%,rgba(255,255,255,0)_100%)]"
  >
  </div>
  <div class="containerText">
    <div class="hero__title">
      <h2>RENTA DE</h2>
      <h1
        data-value={title}
        class="hover:bg-black hover:text-white dark:hover:bg-white dark:hover:text-[#29628d] text-[#29628d] dark:text-white"
      >
        {title}
      </h1>
    </div>
  </div>
</div>

<style>
  .containerText {
    place-items: center;
  }

  h1 {
    font-weight: 800;
    font-size: clamp(3rem, 5vw, 5.5rem);
    border-radius: clamp(0.4rem, 0.75vw, 1rem);
    padding: 0rem clamp(1rem, 2vw, 3rem);
  }

  h2 {
    font-weight: 800;
    font-size: clamp(2rem, 5vw, 5rem);
    border-radius: clamp(0.4rem, 0.75vw, 1rem);
  }

  * {
    padding: 0;
    margin: 0;
    box-sizing: border-box;
    transition: all 0s cubic-bezier(0.37, 0, 0.45, 0.99);
  }
  *:before,
  *:after {
    box-sizing: inherit;
  }
  @-webkit-keyframes driving {
    0% {
      transform: translateY(-650px);
    }
    100% {
      transform: translateY(0);
    }
  }

  @keyframes driving {
    0% {
      transform: translateY(-650px);
    }
    100% {
      transform: translateY(0);
    }
  }
  .hero__title {
    padding: 16rem 2rem 12rem;
    text-align: center;
    position: relative;
    z-index: 1;
  }

  .gps-bg {
    position: relative;
    perspective: 500px;
    overflow: hidden;
  }
  .gps-bg:after {
    content: "";
    position: absolute;
    width: 200%;
    height: 5em;
    bottom: 0;
    transform: skewY(-2deg);
  }
  .gps-bg__guts {
    position: absolute;
    transform: rotateX(45deg);
    width: calc(100% + 1000px);
    height: 100%;
    left: -500px;
  }
  .gps-bg__bg {
    height: 2000px;
    background-image: url(http://www.rastrac.com/hubfs/roads.svg);
    background-position: 50%;
    background-size: 25%;
    position: absolute;
    top: -162px;
    width: 100%;
    transform: translateY(-650px);
    -webkit-animation: driving 10s linear 0ms infinite;
    animation: driving 10s linear 0ms infinite;
  }
  .gps-bg__fade {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 60%;
    z-index: 1;
  }
</style>

<script>
  const letters = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";

  let interval = null;

  document.querySelector("h1").onmouseover = (event) => {
    let iteration = 0;

    clearInterval(interval);

    interval = setInterval(() => {
      event.target.innerText = event.target.innerText
        .split("")
        .map((letter, index) => {
          if (index < iteration) {
            return event.target.dataset.value[index];
          }

          return letters[Math.floor(Math.random() * 26)];
        })
        .join("");

      if (iteration >= event.target.dataset.value.length) {
        clearInterval(interval);
      }

      iteration += 1 / 3;
    }, 30);
  };
</script>
